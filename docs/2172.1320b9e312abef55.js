"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2172],{2172:(G,c,r)=>{r.r(c),r.d(c,{JoinpollPageModule:()=>v});var d=r(6362),h=r(587),p=r(8139),e=r(3926),s=r(1951),u=r(8211),n=r(260),m=r(6301);function _(o,t){1&o&&(n.ynx(0),n._UZ(1,"ion-icon",6)(2,"ion-icon",7),n.BQk())}function J(o,t){1&o&&n._UZ(0,"ion-spinner",8)}function f(o,t){1&o&&(n.TgZ(0,"ion-content")(1,"ion-item",9)(2,"h3"),n._UZ(3,"i",2),n.ALo(4,"translate"),n._uU(5,"\xa0 "),n.qZA()(),n.TgZ(6,"ion-item",9)(7,"h1"),n._UZ(8,"ion-spinner",10),n.qZA()()()),2&o&&(n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,1,"joinpoll.fetching"),n.oJD))}function Z(o,t){1&o&&(n.TgZ(0,"ion-content")(1,"ion-item",9)(2,"h3"),n._UZ(3,"i",2),n.ALo(4,"translate"),n._uU(5,"\xa0 "),n.qZA()(),n.TgZ(6,"ion-item",9)(7,"h1"),n._UZ(8,"ion-spinner",10),n.qZA()()()),2&o&&(n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,1,"joinpoll.initializing"),n.oJD))}const y=function(o){return{poll_title:o}},w=function(o){return{due:o}},P=function(o,t){return{link_start:o,link_end:t}};function x(o,t){if(1&o){const i=n.EpF();n.TgZ(0,"ion-content")(1,"ion-item",11)(2,"ion-col",12),n._UZ(3,"h4",2),n.ALo(4,"translate"),n._UZ(5,"p",2),n.ALo(6,"translate"),n.qZA()(),n.TgZ(7,"ion-item",13)(8,"ion-col",12),n._UZ(9,"p",2),n.ALo(10,"translate"),n.qZA()(),n.TgZ(11,"ion-item",14)(12,"ion-col",12),n._UZ(13,"p",2),n.ALo(14,"translate"),n.qZA()(),n.TgZ(15,"ion-item",15)(16,"ion-col",12)(17,"small"),n._UZ(18,"p",2),n.ALo(19,"translate"),n.qZA()()(),n.TgZ(20,"ion-item",9)(21,"ion-col",12)(22,"small"),n._UZ(23,"p",2),n.ALo(24,"translate"),n.qZA()()(),n.TgZ(25,"ion-item",9)(26,"ion-col",12)(27,"ion-button",16),n.NdJ("click",function(){return n.CHM(i),n.oxw().go_button_clicked()}),n._UZ(28,"span",2),n.ALo(29,"translate"),n._uU(30,"\xa0 "),n._UZ(31,"ion-icon",17),n.qZA()()(),n.TgZ(32,"ion-item",9)(33,"ion-col",12)(34,"small"),n._UZ(35,"p",2),n.ALo(36,"translate"),n.qZA()()()()}if(2&o){const i=n.oxw();n.xp6(3),n.Q6J("innerHtml",n.xi3(4,8,"joinpoll.header",n.VKq(27,y,i.p.title)),n.oJD),n.xp6(2),n.Q6J("innerHtml",n.xi3(6,11,"winner"==i.p.type?"joinpoll.p1-winner":"joinpoll.p1-share",n.VKq(29,w,i.p.due_string)),n.oJD),n.xp6(4),n.Q6J("innerHtml",n.lcZ(10,14,"joinpoll.p2"),n.oJD),n.xp6(4),n.Q6J("innerHtml",n.lcZ(14,16,"joinpoll.p3"),n.oJD),n.xp6(5),n.Q6J("innerHtml",n.lcZ(19,18,"joinpoll.p4"),n.oJD),n.xp6(5),n.Q6J("innerHtml",n.lcZ(24,20,"joinpoll.p5"),n.oJD),n.xp6(5),n.Q6J("innerHtml",n.lcZ(29,22,"joinpoll.lets-go-button"),n.oJD),n.xp6(7),n.Q6J("innerHtml",n.xi3(36,24,"joinpoll.p6",n.WLB(31,P,i.help_link_start,i.help_link_end)),n.oJD)}}const A=[{path:"",component:(()=>{class o{constructor(i,l,g,D){this.router=i,this.route=l,this.translate=g,this.G=D,this.window=window,this.help_link_start='<a href="/help">',this.help_link_end="</a>",this.ready=!1,this.G.L.entry("JoinpollPage.constructor"),this.route.params.subscribe(a=>{this.db_server_url=a.db_server_url,this.db_password=a.db_password,this.pid=a.pid,this.poll_password=a.poll_password})}ngOnInit(){this.G.L.entry("JoinpollPage.ngOnInit")}ionViewWillEnter(){this.G.L.entry("JoinpollPage.ionViewWillEnter"),this.G.D.page=this}ionViewDidEnter(){this.G.L.entry("JoinpollPage.ionViewDidEnter"),this.G.D.ready&&this.onDataReady(),this.G.L.debug("JoinpollPage.ready:",this.ready)}onDataReady(){this.G.L.entry("JoinpollPage.onDataReady"),this.pid in this.G.P.polls?(this.p=this.G.P.polls[this.pid],"draft"==this.p.state?(this.G.L.warn("JoinpollPage called for draft poll, redirecting to mypolls page",this.pid),this.router.navigate(["/mypolls"])):(this.G.L.info("JoinpollPage called for known poll, redirecting to polls page",this.pid),this.router.navigate(["/poll/"+this.pid]))):(this.G.L.info("JoinpollPage called for unknown pid, trying to connect",this.pid),this.p=new u.n_(this.G,this.pid),this.p._state="running",this.p.allow_voting=!0,this.p.db_server_url=this.db_server_url,this.p.db_password=this.db_password,this.p.password=this.poll_password,this.p.init_myvid(),this.G.D.connect_to_remote_poll_db(this.pid,!0).then(()=>{this.ready=!0,this.p.set_timeouts(),this.p.tally_all()})),this.G.L.exit("JoinpollPage.onDataReady")}ionViewDidLeave(){this.G.L.entry("JoinpollPage.ionViewDidLeave"),this.G.D.save_state(),this.G.L.exit("JoinpollPage.ionViewDidLeave")}go_button_clicked(){this.router.navigate(["/poll/"+this.pid])}}return o.\u0275fac=function(i){return new(i||o)(n.Y36(s.F0),n.Y36(s.gz),n.Y36(p.sK),n.Y36(m.U))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-join"]],decls:12,vars:8,consts:[[2,"padding-right","11px"],["slot","start"],[3,"innerHtml"],["slot","end"],[4,"ngIf"],["name","crescent","color","grey",4,"ngIf"],["name","cloud-offline-outline","color","grey",2,"position","relative","bottom","-1px"],["name","alert-outline","color","grey"],["name","crescent","color","grey"],["lines","none",1,"ion-text-center"],["name","crescent","size","large"],["color","warning",1,"ion-text-center"],[1,"ion-no-padding","ion-no-margin"],["color","secondary",1,"ion-text-center"],["color","primary",1,"ion-text-center"],["color","light",1,"ion-text-center"],["size","large","fill","solid","color","primary","shape","round","type","submit",3,"click"],["name","arrow-forward-outline"]],template:function(i,l){1&i&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n._UZ(4,"ion-title",2),n.ALo(5,"translate"),n.TgZ(6,"ion-buttons",3),n.YNc(7,_,3,0,"ng-container",4),n.YNc(8,J,1,0,"ion-spinner",5),n.qZA()()(),n.YNc(9,f,9,3,"ion-content",4),n.YNc(10,Z,9,3,"ion-content",4),n.YNc(11,x,37,34,"ion-content",4)),2&i&&(n.xp6(4),n.Q6J("innerHtml",n.lcZ(5,6,"joinpoll.-page-title"),n.oJD),n.xp6(3),n.Q6J("ngIf",!l.window.navigator.onLine),n.xp6(1),n.Q6J("ngIf",l.window.navigator.onLine&&!l.ready),n.xp6(1),n.Q6J("ngIf",!l.ready),n.xp6(1),n.Q6J("ngIf",l.ready&&!l.p),n.xp6(1),n.Q6J("ngIf",l.ready&&null!=l.p))},directives:[e.Gu,e.sr,e.Sm,e.fG,e.wd,d.O5,e.gu,e.PQ,e.W2,e.Ie,e.wI,e.YG],pipes:[p.X$],styles:['@charset "UTF-8";']}),o})()}];let L=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[s.Bz.forChild(A)],s.Bz]}),o})(),v=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[d.ez,h.u5,e.Pc,L,p.aw.forChild()]]}),o})()}}]);
//# sourceMappingURL=2172.1320b9e312abef55.js.map