"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9701],{9701:(Zt,y,p)=>{p.r(y),p.d(y,{DraftpollPage:()=>J,DraftpollPageModule:()=>yt});var h=p(6362),r=p(587),x=p(8139),_=p(3926),f=p(1951),v=p(4929),t=p(260),G=p(5568),T=p(3357),Z=p(8211),D=p(2767),Q=p(2340),k=p(6301);function P(o,a){if(1&o&&(t.TgZ(0,"span"),t._UZ(1,"ion-icon",32),t._uU(2,"\xa0 "),t.qZA()),2&o){const e=t.oxw(2);t.Tol(0==e.stage?"current-field":""),t.xp6(1),t.Q6J("name","winner"==e.formGroup.get("poll_type").value?"trophy":"cut")}}function A(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function C(o,a){if(1&o&&(t.ynx(0),t.YNc(1,A,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.formGroup.get("poll_type").hasError(e.type)&&(n.formGroup.get("poll_type").dirty||n.formGroup.get("poll_type").touched))}}function H(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function L(o,a){if(1&o&&(t.ynx(0),t.YNc(1,H,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.formGroup.get("poll_title").hasError(e.type)&&(n.formGroup.get("poll_title").dirty||n.formGroup.get("poll_title").touched))}}function N(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-input",35),t.NdJ("ionChange",function(){return t.CHM(e),t.oxw(2).set_poll_title()})("keydown",function(i){return t.CHM(e),t.oxw(2).poll_title_onKeydown(i)})("ionBlur",function(){return t.CHM(e),t.oxw(2).blur_poll_title()}),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",22),t.YNc(8,L,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color",1==e.stage?"warning":"light"),t.xp6(2),t.Tol(1==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,7,"draftpoll.title-label"),t.oJD),t.xp6(2),t.Q6J("maxlength",e.E.max_len.title)("placeholder",t.lcZ(6,9,"draftpoll.title-placeholder")),t.xp6(3),t.Q6J("ngForOf",e.validation_messages.poll_title)}}function I(o,a){1&o&&(t._UZ(0,"ion-button",38),t.ALo(1,"translate")),2&o&&t.Q6J("innerHtml",t.lcZ(1,1,"skip"),t.oJD)}function U(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function M(o,a){if(1&o&&(t.ynx(0),t.YNc(1,U,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.formGroup.get("poll_desc").hasError(e.type)&&(n.formGroup.get("poll_desc").dirty||n.formGroup.get("poll_desc").touched))}}const d=function(){return[null,""]};function q(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-textarea",36),t.NdJ("ionChange",function(){return t.CHM(e),t.oxw(2).set_poll_desc()})("keydown",function(i){return t.CHM(e),t.oxw(2).poll_desc_onKeydown(i)})("ionBlur",function(){return t.CHM(e),t.oxw(2).blur_poll_desc()}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,I,2,3,"ion-button",37),t.qZA(),t.TgZ(8,"div",22),t.YNc(9,M,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color",2==e.stage?"warning":""),t.xp6(2),t.Tol(2==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,8,"draftpoll.desc-label"),t.oJD),t.xp6(2),t.Q6J("maxlength",e.E.max_len.desc)("placeholder",t.lcZ(6,10,"draftpoll.desc-placeholder")),t.xp6(2),t.Q6J("ngIf",2==e.stage&&t.DdM(12,d).includes(e.formGroup.get("poll_desc").value)),t.xp6(2),t.Q6J("ngForOf",e.validation_messages.poll_desc)}}function Y(o,a){1&o&&(t._UZ(0,"ion-button",38),t.ALo(1,"translate")),2&o&&t.Q6J("innerHtml",t.lcZ(1,1,"skip"),t.oJD)}function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return i.G.open_url_in_new_tab(i.formGroup.get("poll_url").value)}),t._UZ(1,"span",2),t.ALo(2,"translate"),t._uU(3,"\xa0 "),t._UZ(4,"ion-icon",42),t.qZA()}2&o&&(t.xp6(1),t.Q6J("innerHtml",t.lcZ(2,1,"test"),t.oJD))}function E(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function F(o,a){if(1&o&&(t.ynx(0),t.YNc(1,E,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.formGroup.get("poll_url").hasError(e.type)&&(n.formGroup.get("poll_url").dirty||n.formGroup.get("poll_url").touched))}}function O(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-input",39),t.NdJ("ionChange",function(){return t.CHM(e),t.oxw(2).set_poll_url()})("keydown",function(i){return t.CHM(e),t.oxw(2).poll_url_onKeydown(i)})("ionBlur",function(){return t.CHM(e),t.oxw(2).blur_poll_url()}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,Y,2,3,"ion-button",37),t.YNc(8,B,5,3,"ion-button",40),t.qZA(),t.TgZ(9,"div",22),t.YNc(10,F,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color",3==e.stage?"warning":""),t.xp6(2),t.Tol(3==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,9,"draftpoll.url-label"),t.oJD),t.xp6(2),t.Q6J("placeholder",t.lcZ(6,11,"draftpoll.url-placeholder"))("maxlength",e.E.max_len.url),t.xp6(2),t.Q6J("ngIf",3==e.stage&&t.DdM(13,d).includes(e.formGroup.get("poll_url").value)),t.xp6(1),t.Q6J("ngIf",e.formGroup.get("poll_url").valid&&!t.DdM(14,d).includes(e.formGroup.get("poll_url").value)),t.xp6(2),t.Q6J("ngForOf",e.validation_messages.poll_url)}}function V(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function K(o,a){if(1&o&&(t.ynx(0),t.YNc(1,V,2,3,"div",33),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!e.formGroup.get("poll_due_custom").valid&&(e.formGroup.get("poll_due_custom").dirty||e.formGroup.get("poll_due_custom").touched))}}function S(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-datetime",57),t.NdJ("ionClick",function(){return t.CHM(e),t.oxw(3).G.P.update_ref_date()})("ionChange",function(){t.CHM(e);const i=t.oxw(3);return i.set_poll_due_custom(),i.changed_poll_due_custom()}),t.ALo(6,"translate"),t.ALo(7,"translate"),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"div",22),t.YNc(11,K,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("color",5==e.stage?"warning":""),t.xp6(2),t.Tol(5==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,11,"draftpoll.due-datetime-label"),t.oJD),t.xp6(2),t.Q6J("min",e.G.P.ref_date.toISOString())("max",e.get_max_due().toISOString())("dayNames",t.lcZ(6,13,"daynames-sunday-to-saturday"))("monthNames",t.lcZ(7,15,"monthnames"))("cancelText",t.lcZ(8,17,"cancel"))("doneText",t.lcZ(9,19,"OK")),t.xp6(6),t.Q6J("ngForOf",e.validation_messages.poll_due_custom)}}function R(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",16),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-select",43,44),t.NdJ("ionChange",function(){t.CHM(e);const i=t.oxw(2);return i.set_poll_due_type(),i.changed_due_type()}),t.ALo(8,"translate"),t.ALo(9,"translate"),t._UZ(10,"ion-select-option",45),t.ALo(11,"translate"),t._UZ(12,"ion-select-option",46),t.ALo(13,"translate"),t._UZ(14,"ion-select-option",47),t.ALo(15,"translate"),t._UZ(16,"ion-select-option",48),t.ALo(17,"translate"),t._UZ(18,"ion-select-option",49),t.ALo(19,"translate"),t._UZ(20,"ion-select-option",50),t.ALo(21,"translate"),t._UZ(22,"ion-select-option",51),t.ALo(23,"translate"),t._UZ(24,"ion-select-option",52),t.ALo(25,"translate"),t._UZ(26,"ion-select-option",53),t.ALo(27,"translate"),t._UZ(28,"ion-select-option",54),t.ALo(29,"translate"),t._UZ(30,"ion-select-option",55),t.ALo(31,"translate"),t._UZ(32,"ion-select-option",56),t.ALo(33,"translate"),t.qZA()(),t.YNc(34,S,12,21,"ng-container",7),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color",4==e.stage?"warning":""),t.xp6(2),t.Tol(4==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,19,"draftpoll.due-type-label"),t.oJD),t.xp6(2),t.Q6J("cancelText",t.lcZ(8,21,"cancel"))("okText",t.lcZ(9,23,"OK")),t.xp6(5),t.Q6J("innerHtml",t.lcZ(11,25,"draftpoll.due-type-custom"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(13,27,"draftpoll.due-type-10min"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(15,29,"draftpoll.due-type-hour"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(17,31,"draftpoll.due-type-24hr"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(19,33,"draftpoll.due-type-midnight"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(21,35,"draftpoll.due-type-tomorrow-noon"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(23,37,"draftpoll.due-type-tomorrow-night"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(25,39,"draftpoll.due-type-friday-noon"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(27,41,"draftpoll.due-type-sunday-night"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(29,43,"draftpoll.due-type-week"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(31,45,"draftpoll.due-type-two-weeks"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(33,47,"draftpoll.due-type-four-weeks"),t.oJD),t.xp6(2),t.Q6J("ngIf","custom"==e.formGroup.get("poll_due_type").value)}}function $(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return i.advanced_expanded=!i.advanced_expanded}),t._UZ(1,"ion-icon",59),t.TgZ(2,"ion-label"),t._UZ(3,"small",2),t.ALo(4,"translate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("color",e.advanced_expanded?"light":""),t.xp6(1),t.Q6J("name",e.advanced_expanded?"caret-down-outline":"caret-forward-outline"),t.xp6(2),t.Q6J("innerHtml","\xa0\xa0&nbsp"+t.lcZ(4,3,"draftpoll.advanced-settings"),t.oJD)}}function W(o,a){if(1&o&&t._UZ(0,"ion-select-option",60),2&o){const e=a.$implicit,n=t.oxw(2);t.Q6J("value",e)("innerHtml",n.G.S.language_names[e],t.oJD)}}function j(o,a){if(1&o&&t._UZ(0,"app-select-server",61,62),2&o){const e=t.oxw(2);t.Udp("display",e.stage>5&&e.advanced_expanded?"block":"none"),t.Q6J("page_object",e)("page","draftpoll")}}function z(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,l=t.oxw(3);return l.expanded[i]=!l.expanded[i]}),t._UZ(1,"ion-icon",70),t.qZA()}if(2&o){const e=t.oxw().index,n=t.oxw(3);t.xp6(1),t.Q6J("name",n.expanded[e]?"caret-down-outline":"caret-forward-outline")}}function X(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",71),t.NdJ("click",function(){return t.CHM(e),t.oxw(4).no_more()}),t.ALo(1,"translate"),t.qZA()}2&o&&t.Q6J("innerHtml",t.lcZ(1,1,"draftpoll.no-more-button"),t.oJD)}function tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",72),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).del_option_dialog(i)}),t._UZ(1,"ion-icon",73),t.qZA()}}function et(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function nt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,et,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw().index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.formGroup.get("option_name"+n).hasError(e.type)&&(i.formGroup.get("option_name"+n).dirty||i.formGroup.get("option_name"+n).touched))}}function ot(o,a){1&o&&(t._UZ(0,"ion-button",76),t.ALo(1,"translate")),2&o&&t.Q6J("innerHtml",t.lcZ(1,1,"skip"),t.oJD)}function it(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function lt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,it,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(2).index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.formGroup.get("option_desc"+n).hasError(e.type)&&(i.formGroup.get("option_desc"+n).dirty||i.formGroup.get("option_desc"+n).touched))}}const b=function(o){return{name:o}};function at(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-textarea",74),t.NdJ("ionChange",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).set_option_desc(i)})("keydown",function(i){t.CHM(e);const l=t.oxw().index;return t.oxw(3).option_desc_onKeydown(i,l)})("ionBlur",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).blur_option_desc(i)}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,ot,2,3,"ion-button",75),t.qZA(),t.TgZ(8,"div",22),t.YNc(9,lt,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().index,n=t.oxw(3);t.xp6(1),t.Q6J("color",e==n.n_options-1&&1==n.option_stage?"warning":""),t.xp6(2),t.Tol(1==n.option_stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,10,"draftpoll.option-desc-label"),t.oJD),t.xp6(2),t.Q6J("id","input_option_desc"+e)("formControlName","option_desc"+e)("placeholder",t.xi3(6,12,"draftpoll.option-desc-placeholder",t.VKq(15,b,n.formGroup.get("option_name"+e).value)))("maxlength",n.E.max_len.desc),t.xp6(2),t.Q6J("ngIf",1==n.option_stage&&e==n.n_options-1&&t.DdM(17,d).includes(n.formGroup.get("option_desc"+e).value)),t.xp6(2),t.Q6J("ngForOf",n.validation_messages.option_desc)}}function _t(o,a){1&o&&(t._UZ(0,"ion-button",38),t.ALo(1,"translate")),2&o&&t.Q6J("innerHtml",t.lcZ(1,1,"skip"),t.oJD)}function rt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",79),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).index,l=t.oxw(3);return l.G.open_url_in_new_tab(l.formGroup.get("option_url"+i).value)}),t._UZ(1,"span",2),t.ALo(2,"translate"),t._uU(3,"\xa0 "),t._UZ(4,"ion-icon",42),t.qZA()}2&o&&(t.xp6(1),t.Q6J("innerHtml",t.lcZ(2,1,"test"),t.oJD))}function st(o,a){if(1&o&&(t._UZ(0,"div",34),t.ALo(1,"translate")),2&o){const e=t.oxw().$implicit;t.Q6J("innerHtml",t.lcZ(1,1,e.message),t.oJD)}}function pt(o,a){if(1&o&&(t.ynx(0),t.YNc(1,st,2,3,"div",33),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(2).index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.formGroup.get("option_url"+n).hasError(e.type)&&(i.formGroup.get("option_url"+n).dirty||i.formGroup.get("option_url"+n).touched))}}function ct(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-item",15)(2,"ion-label",25),t._UZ(3,"span",2),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"ion-input",77),t.NdJ("ionChange",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).set_option_url(i)})("keydown",function(i){t.CHM(e);const l=t.oxw().index;return t.oxw(3).option_url_onKeydown(i,l)})("ionBlur",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(3).blur_option_url(i)}),t.ALo(6,"translate"),t.qZA(),t.YNc(7,_t,2,3,"ion-button",37),t.YNc(8,rt,5,3,"ion-button",78),t.qZA(),t.TgZ(9,"div",22),t.YNc(10,pt,2,1,"ng-container",23),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().index,n=t.oxw(3);t.xp6(1),t.Q6J("color",e==n.n_options-1&&2==n.option_stage?"warning":""),t.xp6(2),t.Tol(2==n.option_stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(4,11,"draftpoll.option-url-label"),t.oJD),t.xp6(2),t.Q6J("id","input_option_url"+e)("formControlName","option_url"+e)("placeholder",t.xi3(6,13,"draftpoll.option-url-placeholder",t.VKq(16,b,n.formGroup.get("option_name"+e).value)))("maxlength",n.E.max_len.url),t.xp6(2),t.Q6J("ngIf",2==n.option_stage&&e==n.n_options-1&&t.DdM(18,d).includes(n.formGroup.get("option_url"+e).value)),t.xp6(1),t.Q6J("ngIf",n.formGroup.get("option_url"+e).valid&&!t.DdM(19,d).includes(n.formGroup.get("option_url"+e).value)),t.xp6(2),t.Q6J("ngForOf",n.validation_messages.option_url)}}function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"ion-item",15),t.YNc(2,z,2,1,"ion-button",65),t.TgZ(3,"ion-label",25),t._UZ(4,"span",2),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"ion-input",66),t.NdJ("ionChange",function(){const l=t.CHM(e).index;return t.oxw(3).set_option_name(l)})("keydown",function(i){const c=t.CHM(e).index,g=t.oxw(3);return g.option_name_onKeydown(i,c,g.show_details)})("ionBlur",function(){const l=t.CHM(e).index;return t.oxw(3).blur_option_name(l)}),t.ALo(7,"translate"),t.qZA(),t.YNc(8,X,2,3,"ion-button",67),t.YNc(9,tt,2,0,"ion-button",68),t.qZA(),t.TgZ(10,"div",22),t.YNc(11,nt,2,1,"ng-container",23),t.qZA(),t.YNc(12,at,10,18,"ng-container",7),t.YNc(13,ct,11,20,"ng-container",7),t.qZA()}if(2&o){const e=a.index,n=t.oxw(3);t.xp6(1),t.Q6J("color",e==n.n_options-1&&0==n.option_stage?"warning":"light"),t.xp6(1),t.Q6J("ngIf",n.show_details),t.xp6(2),t.Tol(0==n.option_stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(5,14,"winner"==n.formGroup.get("poll_type").value?"draftpoll.option-name-label":"draftpoll.target-name-label"),t.oJD),t.xp6(2),t.Q6J("id","input_option_name"+e)("formControlName","option_name"+e)("placeholder",t.lcZ(7,16,"winner"==n.formGroup.get("poll_type").value?"draftpoll.option-name-placeholder":"draftpoll.target-name-placeholder"))("maxlength",n.E.max_len.name),t.xp6(2),t.Q6J("ngIf",e==n.n_options-1&&e>1&&""==(n.formGroup.get("option_name"+e).value||"")),t.xp6(1),t.Q6J("ngIf",n.n_options>1&&!(e==n.n_options-1&&e>1&&""==(n.formGroup.get("option_name"+e).value||""))),t.xp6(2),t.Q6J("ngForOf",n.validation_messages.option_name),t.xp6(1),t.Q6J("ngIf",n.option_stage>0&&n.expanded[e]),t.xp6(1),t.Q6J("ngIf",n.option_stage>1&&n.expanded[e])}}function ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",80)(1,"ion-fab-button",81),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).new_option()}),t._UZ(2,"ion-icon",82),t.qZA(),t.TgZ(3,"ion-button",83),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).new_option()}),t.ALo(4,"translate"),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("innerHtml",t.lcZ(4,1,"winner"==e.formGroup.get("poll_type").value?"add-option":"add-target"),t.oJD)}}const gt=function(){return[]};function ft(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-item",10),t._UZ(2,"ion-label",2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,dt,14,18,"div",23),t.YNc(5,ut,5,3,"ion-item",63),t.TgZ(6,"ion-item",64),t._UZ(7,"small",2),t.ALo(8,"translate"),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHtml",t.lcZ(3,4,"winner"==e.formGroup.get("poll_type").value?"options":"possible-targets"),t.oJD),t.xp6(2),t.Q6J("ngForOf",t.DdM(8,gt).constructor(e.n_options)),t.xp6(1),t.Q6J("ngIf",10==e.option_stage&&e.formGroup.get("option_url"+(e.n_options-1)).valid),t.xp6(2),t.Q6J("innerHtml",t.lcZ(8,6,"winner"==e.formGroup.get("poll_type").value?"draftpoll.please-list-options-explanation":"draftpoll.please-list-targets-explanation"),t.oJD)}}function mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item",84)(1,"ion-label",85),t._UZ(2,"small",2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"ion-button",86),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).ready_button_clicked()}),t._UZ(5,"ion-icon",87),t._uU(6,"\xa0 "),t._UZ(7,"span",2),t.ALo(8,"translate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("innerHtml","("+t.lcZ(3,3,"draftpoll.draft-saved")+")",t.oJD),t.xp6(2),t.Q6J("disabled",e.n_options<2||!e.formGroup.valid),t.xp6(3),t.Q6J("innerHtml",t.lcZ(8,5,"ready"),t.oJD)}}function ht(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"ion-content")(1,"form",8)(2,"input",9),t.NdJ("change",function(i){return t.CHM(e),t.oxw().import_csv(i)}),t.qZA(),t.TgZ(3,"ion-item",10),t._UZ(4,"ion-label",2),t.ALo(5,"translate"),t.TgZ(6,"ion-button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.show_details=!i.show_details}),t._UZ(7,"span",12),t.ALo(8,"translate"),t._UZ(9,"ion-toggle",13,14),t.qZA()(),t.TgZ(11,"ion-item",15)(12,"ion-label",16),t.YNc(13,P,3,3,"span",17),t._UZ(14,"span",2),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"ion-select",18,19),t.NdJ("ionChange",function(){t.CHM(e);const i=t.oxw();return i.set_poll_type(),i.changed_poll_type()}),t.ALo(19,"translate"),t.ALo(20,"translate"),t._UZ(21,"ion-select-option",20),t.ALo(22,"translate"),t._UZ(23,"ion-select-option",21),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"div",22),t.YNc(26,C,2,1,"ng-container",23),t.qZA(),t.YNc(27,N,9,11,"ng-container",7),t.YNc(28,q,10,13,"ng-container",7),t.YNc(29,O,11,15,"ng-container",7),t.YNc(30,R,35,49,"ng-container",7),t.YNc(31,$,5,5,"ion-item",24),t.TgZ(32,"ion-item")(33,"ion-label",25),t._UZ(34,"ion-icon",26),t._uU(35,"\xa0 "),t._UZ(36,"span",2),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ion-select",27,28),t.NdJ("ionChange",function(){return t.CHM(e),t.oxw().set_poll_language()}),t.ALo(40,"translate"),t.ALo(41,"translate"),t.YNc(42,W,1,2,"ion-select-option",29),t.qZA()(),t.YNc(43,j,2,4,"app-select-server",30),t.YNc(44,ft,9,9,"ng-container",7),t.YNc(45,mt,9,7,"ion-item",31),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.formGroup),t.xp6(3),t.Q6J("innerHtml",t.lcZ(5,28,"draftpoll.general-information"),t.oJD),t.xp6(3),t.Q6J("innerHtml",t.lcZ(8,30,"details"),t.oJD),t.xp6(2),t.Q6J("checked",e.show_details),t.xp6(2),t.Q6J("color",0==e.stage?"warning":""),t.xp6(2),t.Q6J("ngIf",e.formGroup.get("poll_type").valid),t.xp6(1),t.Tol(0==e.stage?"current-field":""),t.Q6J("innerHtml",t.lcZ(15,32,"draftpoll.type-label"),t.oJD),t.xp6(2),t.Q6J("cancelText",t.lcZ(19,34,"cancel"))("okText",t.lcZ(20,36,"OK")),t.xp6(5),t.Q6J("innerHtml",t.lcZ(22,38,"draftpoll.type-winner"),t.oJD),t.xp6(2),t.Q6J("innerHtml",t.lcZ(24,40,"draftpoll.type-share"),t.oJD),t.xp6(3),t.Q6J("ngForOf",e.validation_messages.poll_type),t.xp6(1),t.Q6J("ngIf",e.stage>0),t.xp6(1),t.Q6J("ngIf",e.stage>1&&e.show_details),t.xp6(1),t.Q6J("ngIf",e.stage>2&&e.show_details),t.xp6(1),t.Q6J("ngIf",e.stage>3),t.xp6(1),t.Q6J("ngIf",e.stage>5),t.xp6(1),t.Udp("display",e.stage>5&&e.advanced_expanded?"block":"none"),t.xp6(4),t.Q6J("innerHtml",t.lcZ(37,42,"draftpoll.language"),t.oJD),t.xp6(2),t.Q6J("cancelText",t.lcZ(40,44,"cancel"))("okText",t.lcZ(41,46,"OK")),t.xp6(4),t.Q6J("ngForOf",e.translate.langs),t.xp6(1),t.Q6J("ngIf",e.E.data_service.allow_other_servers),t.xp6(1),t.Q6J("ngIf",e.stage>5),t.xp6(1),t.Q6J("ngIf",e.formGroup.get("poll_title").valid)}}function u(o){return!("Tab"!=o.key&&"Enter"!=o.key||o.ctrlKey||o.shiftKey||o.metaKey||o.altKey)}let J=(()=>{class o{constructor(e,n,i,l,c,g,w,s){this.router=e,this.route=n,this.formBuilder=i,this.popover=l,this.alertCtrl=c,this.G=g,this.translate=w,this.ref=s,this.E=Q.N,this.max=Math.max,this.show_details=!1,this.ready=!1,this.validation_messages={poll_type:[{type:"required",message:"validation.poll-type-required"}],poll_language:[],poll_title:[{type:"required",message:"validation.poll-title-required"}],poll_desc:[],poll_url:[{type:"pattern",message:"validation.poll-url-valid"}],poll_due_type:[{type:"required",message:"validation.poll-due-type-required"}],poll_due_custom:[{message:"validation.poll-due-future"}],option_name:[{type:"required",message:"validation.option-name-required"}],option_desc:[],option_url:[{type:"pattern",message:"validation.option-url-valid"}]},this.G.L.entry("DraftpollPage.constructor"),this.route.params.subscribe(m=>{this.pid=m.pid,this.pd=JSON.parse(decodeURIComponent(m.pd||"{}"))})}get n_options(){return(this.pd.options||[]).length}ngOnInit(){this.G.L.entry("DraftpollPage.ngOnInit"),this.reset()}ionViewWillEnter(){this.G.L.entry("DraftpollPage.ionViewWillEnter"),this.G.D.page=this,this.reset()}ionViewDidEnter(){this.G.L.entry("DraftpollPage.ionViewDidEnter"),this.G.D.ready&&!this.ready&&this.onDataReady()}onDataReady(){if(this.G.L.entry("DraftpollPage.onDataReady"),this.deleted=!1,this.pid)if(this.pid in this.G.P.polls)if("draft"==this.G.P.polls[this.pid].state){this.G.L.info("DraftpollPage editing existing draft",this.pid);let e=this.G.P.polls[this.pid];this.pd={pid:e.pid,type:e.type,language:e.language,title:e.title,desc:e.desc,url:e.url,due_type:e.due_type,due_custom:e.due_custom,db:e.db,db_from_pid:e.db_from_pid,db_custom_server_url:e.db_custom_server_url,db_custom_password:e.db_custom_password,options:[]},this.stage=e.due_custom?e.due_type?6:""!=e.url?4:""!=e.desc?3:""!=e.title?4:e.type?1:0:6;for(let[n,i]of Object.entries(e.options))this.pd.options.push({oid:n,name:i.name,desc:i.desc,url:i.url}),this.stage=6,this.option_stage=10}else this.G.L.warn("DraftpollPage non-draft pid ignored, generating new draft");else this.G.L.warn("DraftpollPage unknown pid ignored, generating new draft");else this.stage=0,this.pd?(this.G.L.info("DraftpollPage editing draft with data",this.pd),this.pd.due_custom=""!=(this.pd.due_custom||"")?new Date(this.pd.due_custom):null,this.pd.db=this.pd.db||"default"):(this.G.L.info("DraftpollPage editing new draft"),this.pd={db:"default"});if(this.expanded=Array(this.n_options),this.advanced_expanded=!1,this.pd){this.formGroup.setValue({poll_type:this.pd.type||"",poll_language:""!=(this.pd.language||"")?this.pd.language:this.G.S.language,poll_title:this.pd.title||"",poll_desc:this.pd.desc||"",poll_url:this.pd.url||"",poll_due_type:this.pd.due_type||"",poll_due_custom:this.pd.due_custom?this.pd.due_custom.toISOString():""}),(this.pd.language||this.pd.db_from_pid||this.pd.db_custom_server_url)&&(this.advanced_expanded=!0),(this.pd.desc||this.pd.url)&&(this.show_details=!0),this.pd.options||(this.pd.options=[]);for(let[e,n]of this.pd.options.entries())this.add_option_inputs(e),this.formGroup.get("option_name"+e).setValue(n.name),this.formGroup.get("option_desc"+e).setValue(n.desc),this.formGroup.get("option_url"+e).setValue(n.url),this.stage=6,this.option_stage=10,(n.desc||n.url)&&(this.show_details=!0)}0==this.n_options&&(this.add_option({}),this.option_stage=0),this.ready=!0,this.ref.detectChanges(),this.ionSelects.map(e=>e.value=e.value),this.formGroup.get("poll_type").value||this.type_select.open(new MouseEvent("click"))}onSelectServerReady(e){this.select_server=e,this.pd&&this.select_server.selectServerFormGroup.setValue({db:this.pd.db||"",db_from_pid:this.pd.db_from_pid||"",db_custom_server_url:this.pd.db_custom_server_url||"",db_custom_password:this.pd.db_custom_password||""})}ionViewWillLeave(){if(this.G.L.entry("DraftpollPage.ionViewWillLeave"),""==(this.pd.title||""))this.G.L.info("DraftpollPage.ionViewWillLeave not saving empty title draft");else if(!this.deleted){var e;this.G.L.info("DraftpollPage.ionViewWillLeave saving draft"),this.pid||(this.pid=(1==this.pd.is_test?"TEST_":"")+this.G.P.generate_pid()),(e=this.pid in this.G.P.polls?this.G.P.polls[this.pid]:new Z.n_(this.G,this.pid)).state="draft",1==this.pd.is_test&&(e.is_test=!0),e.type=this.pd.type,e.language=this.pd.language,e.title=this.pd.title,e.desc=this.pd.desc,e.url=this.pd.url,e.due_type=this.pd.due_type,e.due_custom=this.pd.due_custom,e.set_due(),e.db=this.pd.db,e.db_from_pid=this.pd.db_from_pid,e.db_custom_server_url=this.pd.db_custom_server_url,e.db_custom_password=this.pd.db_custom_password;let i=[];for(let l of this.pd.options)if(this.G.L.trace(" storing option data",l),""!=(l.name||"")){var n;l.oid||(l.oid=this.G.P.generate_oid(this.pid),this.G.L.trace("  generated new oid",l.oid)),l.oid in e.options?(this.G.L.trace("  reusing Option object",n=e.options[l.oid]),n.name=l.name,n.desc=l.desc,n.url=l.url):(this.G.L.trace("  creating new Option object"),n=new Z.Wx(this.G,e,l.oid,l.name,l.desc,l.url)),i.push(l.oid),e.is_test&&l.ratings&&this.G.D.setp(this.pid,"simulated_ratings."+l.oid,JSON.stringify(l.ratings))}this.G.L.trace(" oids now",i);for(let[l,c]of Object.entries(e.options))i.includes(l)||(this.G.L.trace(" removing old option",l),e.remove_option(l));G.s.schedule({notifications:[{title:this.translate.instant("draftpoll.notification-saved-title"),body:e.title,id:1}]}).then(l=>{this.G.L.trace("DraftpollPage.ionViewWillLeave localNotifications.schedule succeeded:",l)}).catch(l=>{this.G.L.warn("DraftpollPage.ionViewWillLeave localNotifications.schedule failed:",l)})}this.G.L.trace("DraftpollPage.ionViewWillLeave D.pids:",[...this.G.D.pids]),this.G.L.exit("DraftpollPage.ionViewWillLeave")}ionViewDidLeave(){this.G.L.entry("DraftpollPage.ionViewDidLeave"),this.G.D.save_state(),this.ready=!1,this.G.L.exit("DraftpollPage.ionViewDidLeave")}onDataChange(){this.G.L.entry("DraftpollPage.onDataChange")}set_poll_type(){let e=this.formGroup.get("poll_type");e.valid&&(this.pd.type=e.value)}set_poll_language(){let e=this.formGroup.get("poll_language");e.valid&&(this.pd.language=e.value)}set_poll_title(){let e=this.formGroup.get("poll_title");e.valid&&(this.pd.title=e.value)}set_poll_desc(){let e=this.formGroup.get("poll_desc");e.valid&&(this.pd.desc=e.value)}set_poll_url(){let e=this.formGroup.get("poll_url");e.valid&&(this.pd.url=e.value)}set_poll_due_type(){let e=this.formGroup.get("poll_due_type");e.valid&&(this.pd.due_type=e.value)}set_poll_due_custom(){this.G.P.update_ref_date();let e=this.formGroup.get("poll_due_custom");e.valid&&(this.pd.due_custom=new Date(e.value))}set_option_name(e){let n=this.formGroup.get("option_name"+e);this.G.L.trace("set_option_name",e,n.value),n.valid&&(this.pd.options[e].name=n.value),this.G.L.trace("set_option_name result",this.pd.options,this.pd.options[e])}set_option_desc(e){let n=this.formGroup.get("option_desc"+e);n.valid&&(this.pd.options[e].desc=n.value)}set_option_url(e){let n=this.formGroup.get("option_url"+e);n.valid&&(this.pd.options[e].url=n.value)}set_db(e){this.pd.db=e}set_db_from_pid(e){this.pd.db_from_pid=e}set_db_custom_server_url(e){this.pd.db_custom_server_url=e}set_db_custom_password(e){this.pd.db_custom_password=e}set_focus(e){setTimeout(()=>{const n=document.getElementById(e);n&&n.setFocus()},100)}open_due_select(){setTimeout(()=>{document.getElementById("due_select").open(new MouseEvent("click"))},100)}open_due_custom(){setTimeout(()=>{document.getElementById("poll_due_custom").open()},100)}changed_poll_type(){this.stage<1&&(this.stage=Math.max(this.stage,1),this.set_focus("input_poll_title"))}blur_poll_title(){this.formGroup.get("poll_title").valid||this.set_focus("input_poll_title")}poll_title_onKeydown(e){u(e)&&(this.formGroup.get("poll_title").valid?(this.stage<2&&(this.stage=this.show_details?2:4),this.show_details?this.set_focus("input_poll_desc"):this.open_due_select()):this.set_focus("input_poll_title"))}blur_poll_desc(){}poll_desc_onKeydown(e){u(e)&&this.stage<3&&(this.stage=3,this.set_focus("input_poll_url"))}blur_poll_url(){this.formGroup.get("poll_url").valid||this.set_focus("input_poll_url")}poll_url_onKeydown(e){u(e)&&(this.formGroup.get("poll_url").valid?(this.stage<4&&(this.stage=Math.max(this.stage,4)),this.open_due_select()):this.set_focus("input_poll_url"))}changed_due_type(){this.stage<5&&("custom"==this.formGroup.get("poll_due_type").value?(this.stage=5,this.open_due_custom()):(this.stage=6,this.set_focus("input_option_name0")))}changed_poll_due_custom(){this.formGroup.get("poll_due_custom").valid&&this.stage<6&&(this.stage=6,this.set_focus("input_option_name0"))}blur_option_name(e){this.formGroup.get("option_name"+e).valid||this.set_focus("input_option_name"+e)}option_name_onKeydown(e,n,i){u(e)&&(this.formGroup.get("option_name"+n).valid?i?(this.option_stage=this.max(this.option_stage,1),this.expanded[n]=!0,this.set_focus("input_option_desc"+n)):n==this.n_options-1&&this.next_option(n):this.set_focus("input_option_name"+n))}blur_option_desc(e){this.formGroup.get("option_desc"+e).valid||this.set_focus("input_option_desc"+e)}option_desc_onKeydown(e,n){u(e)&&(this.formGroup.get("option_desc"+n).valid?(this.option_stage=Math.max(this.option_stage,2),this.set_focus("input_option_url"+n)):this.set_focus("input_option_desc"+n))}blur_option_url(e){this.formGroup.get("option_url"+e).valid||this.set_focus("input_option_url"+e)}option_url_onKeydown(e,n){u(e)&&(this.formGroup.get("option_url"+n).valid?n==this.n_options-1?this.next_option(n):this.set_focus("input_option_name"+(n+1)):this.set_focus("input_option_url"+n))}next_option(e){this.option_stage=this.max(this.option_stage,3),this.expanded[e]=!1,this.add_option({}),this.set_focus("input_option_name"+(e+1))}del_poll_dialog(){return(0,v.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({message:this.translate.instant("draftpoll.del-poll-confirm-question"),buttons:[{text:this.translate.instant("cancel"),role:"Cancel",handler:()=>{console.log("Confirm Cancel.")}},{text:this.translate.instant("OK"),role:"Ok",handler:()=>{this.del_draft()}}]})).present()})}del_option_dialog(e){return(0,v.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({message:this.translate.instant("choice"==this.formGroup.get("poll_type").value?"draftpoll.del-option-confirm-question":"draftpoll.del-target-confirm-question",{name:this.formGroup.get("option_name"+e).value}),buttons:[{text:this.translate.instant("cancel"),role:"Cancel",handler:()=>{console.log("Confirm Cancel.")}},{text:this.translate.instant("OK"),role:"Ok",handler:()=>{this.del_option(e)}}]})).present()})}no_more(){""==(this.formGroup.get("option_name"+(this.n_options-1)).value||"")&&(this.option_stage=10,this.del_option(this.n_options-1))}new_option(){this.option_stage=0,this.add_option({})}showkebap(e){this.popover.create({event:e,component:T.DraftpollKebapPage,translucent:!0,showBackdrop:!1,cssClass:"kebap",componentProps:{parent:this}}).then(n=>{n.present()})}send4review(){this.G.L.warn("DraftpollPage.send4review not yet implemented!")}import_csv_dialog(){return(0,v.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({header:this.translate.instant("draftpoll.import-options-header"),message:this.translate.instant("draftpoll.import-options-msg"),buttons:[{text:this.translate.instant("cancel"),role:"Cancel",handler:()=>{console.log("Confirm Cancel.")}},{text:this.translate.instant("choose-file"),role:"Ok",handler:()=>{document.getElementById("choosefile").click()}}]})).present()})}ready_button_clicked(){this.formGroup.get("poll_due_custom").updateValueAndValidity(),this.formGroup.valid&&(this.pid||(this.pid=(1==this.pd.is_test?"TEST_":"")+this.G.P.generate_pid()),this.router.navigate(["/previewpoll/"+this.pid]))}reset(){this.formGroup=this.formBuilder.group({poll_type:new r.NI("",r.kI.required),poll_language:new r.NI(""),poll_title:new r.NI("",r.kI.required),poll_desc:new r.NI(""),poll_url:new r.NI("",r.kI.pattern(this.G.urlRegex)),poll_due_type:new r.NI("",r.kI.required),poll_due_custom:new r.NI("",this.allowed_date.bind(this))}),this.G.P.update_ref_date()}del_draft(){this.pid&&this.G.P.polls[this.pid].delete(),this.deleted=!0,this.router.navigate(["/mypolls"])}import_csv(e){const n=e.target.files[0],i=new FileReader,l=this;i.onload=function(c){const g=c.target.result;for(var w of g.split("\n")){var s=w.split(/\s*"\s*,\s*"\s*/);s.length>0&&(s[0]=s[0].slice(s[0].indexOf('"')+1),s[s.length-1]=s[s.length-1].slice(0,s[s.length-1].indexOf('"')),""!=(s=s.map(m=>m.trim()))[0]&&(l.no_more(),1==s.length?l.add_option({name:s[0]}):2==s.length?(l.add_option({name:s[0],desc:s[1]}),l.detailstoggle.checked=!0):(l.add_option({name:s[0],desc:s[1],url:s[2]}),l.detailstoggle.checked=!0),l.stage=10,l.option_stage=10))}},i.readAsText(n)}restart_with_data(e){this.G.L.info("DraftpollPage.restart_with_data",e),this.router.navigate(["/draftpoll/use/"+encodeURIComponent(e)])}add_option(e){let n=this.n_options;this.pd.options.push(e),this.add_option_inputs(n),this.formGroup.get("option_name"+n).setValue(e.name),this.formGroup.get("option_desc"+n).setValue(e.desc),this.formGroup.get("option_url"+n).setValue(e.url)}add_option_inputs(e){this.formGroup.addControl("option_name"+e,new r.NI("",r.kI.required)),this.formGroup.addControl("option_desc"+e,new r.NI("")),this.formGroup.addControl("option_url"+e,new r.NI("",r.kI.pattern(this.G.urlRegex))),this.option_stage=0}del_option(e){for(let i=e+1;i<this.n_options;i++)this.formGroup.get("option_name"+(i-1)).setValue(this.formGroup.get("option_name"+i).value),this.formGroup.get("option_desc"+(i-1)).setValue(this.formGroup.get("option_desc"+i).value),this.formGroup.get("option_url"+(i-1)).setValue(this.formGroup.get("option_url"+i).value),this.pd.options[i-1]=this.pd.options[i];let n=this.n_options-1;this.formGroup.removeControl("option_name"+n),this.formGroup.removeControl("option_desc"+n),this.formGroup.removeControl("option_url"+n),this.pd.options.pop()}now(){return new Date}allowed_date(e){if(e&&e.value){const n=new Date(e.value);return this.G.P.ref_date>=n?{past:!0}:this.get_max_due()<n?{too_late:!0}:null}}get_max_due(){const e=new Date(this.G.P.ref_date.valueOf());return e.setDate(e.getDate()+this.E.polls.max_duration_days),e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.F0),t.Y36(f.gz),t.Y36(r.qu),t.Y36(_.Dh),t.Y36(_.Br),t.Y36(k.U),t.Y36(x.sK),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-draftpoll"]],viewQuery:function(e,n){if(1&e&&(t.Gf(_.t9,5,t.SBq),t.Gf(_.t9,5),t.Gf(_.t9,5),t.Gf(D.K,5),t.Gf(_.ho,5),t.Gf(_.t9,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.type_select_ref=i.first),t.iGM(i=t.CRH())&&(n.type_select=i.first),t.iGM(i=t.CRH())&&(n.due_select=i.first),t.iGM(i=t.CRH())&&(n.select_server=i.first),t.iGM(i=t.CRH())&&(n.detailstoggle=i.first),t.iGM(i=t.CRH())&&(n.ionSelects=i)}},decls:12,vars:4,consts:[[2,"padding-right","11px"],["slot","start"],[3,"innerHtml"],["slot","end",1,"ion-no-padding","ion-no-margin"],["fill","clear",1,"ion-no-padding","ion-no-margin",3,"click"],["name","trash-outline","slot","icon-only"],["ios","ellipsis-horizontal","md","ellipsis-vertical","slot","icon-only"],[4,"ngIf"],[3,"formGroup"],["hidden","","id","choosefile","type","file",1,"file",3,"change"],["color","primary"],["slot","end","fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],[2,"color","white",3,"innerHtml"],["name","detail-toggle","color","light",2,"--handle-background","black","padding-right","0","margin-right","0",3,"checked"],["detailstoggle",""],[3,"color"],["color","primary","position","floating"],[3,"class",4,"ngIf"],["formControlName","poll_type","text-wrap","","autofocus","","tabindex","0",3,"cancelText","okText","ionChange"],["ionSelects","","type_select",""],["text-wrap","","value","winner",3,"innerHtml"],["text-wrap","","value","share",3,"innerHtml"],[1,"validation-errors"],[4,"ngFor","ngForOf"],[3,"color","click",4,"ngIf"],["position","floating","color","primary"],["name","language-outline"],["formControlName","poll_language",2,"font-size","smaller",3,"cancelText","okText","ionChange"],["ionSelects",""],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"page_object","page","display",4,"ngIf"],["lines","none","class","ion-text-end","text-wrap","",4,"ngIf"],[1,"poll-type",2,"color","black",3,"name"],["class","error-message",3,"innerHtml",4,"ngIf"],[1,"error-message",3,"innerHtml"],["id","input_poll_title","formControlName","poll_title","tabindex","0","type","text","required","","inputmode","text","debounce","100",2,"font-weight","bold","font-style","italic","font-size","larger",3,"maxlength","placeholder","ionChange","keydown","ionBlur"],["id","input_poll_desc","formControlName","poll_desc","autofocus","","tabindex","0","rows","1","auto-grow","","type","text","inputmode","text","debounce","100",2,"font-style","italic",3,"maxlength","placeholder","ionChange","keydown","ionBlur"],["tabindex","-1","color","primary","slot","end","class","skip-button",3,"innerHtml",4,"ngIf"],["tabindex","-1","color","primary","slot","end",1,"skip-button",3,"innerHtml"],["id","input_poll_url","formControlName","poll_url","tabindex","0","type","text","inputmode","url","debounce","100",2,"font-size","smaller","word-wrap","normal",3,"placeholder","maxlength","ionChange","keydown","ionBlur"],["tabindex","-1","fill","clear","slot","end","class","skip-button",3,"click",4,"ngIf"],["tabindex","-1","fill","clear","slot","end",1,"skip-button",3,"click"],["name","open-outline"],["id","due_select","formControlName","poll_due_type","tabindex","0","required","",3,"cancelText","okText","ionChange"],["due_select","","ionSelects",""],["value","custom",3,"innerHtml"],["value","10min",3,"innerHtml"],["value","hour",3,"innerHtml"],["value","24hr",3,"innerHtml"],["value","midnight",3,"innerHtml"],["value","tomorrow-noon",3,"innerHtml"],["value","tomorrow-night",3,"innerHtml"],["value","friday-noon",3,"innerHtml"],["value","sunday-night",3,"innerHtml"],["value","week",3,"innerHtml"],["value","two-weeks",3,"innerHtml"],["value","four-weeks",3,"innerHtml"],["id","poll_due_custom","formControlName","poll_due_custom","tabindex","0","pickerFormat","DD MMM YY HH mm","displayFormat","DDDD, DD MMMM YYYY, HH:mm",3,"min","max","dayNames","monthNames","cancelText","doneText","ionClick","ionChange"],[3,"color","click"],["size","small","color","primary",3,"name"],[3,"value","innerHtml"],[3,"page_object","page"],["select_server",""],["lines","none","class","ion-no-padding","style","padding-left: 5px; padding-top: 5px;",4,"ngIf"],["lines","none"],["tabindex","-1","fill","clear","slot","start","class","field-expander",3,"click",4,"ngIf"],["type","text","required","","tabindex","0","debounce","100",2,"font-weight","bold","font-style","italic",3,"id","formControlName","placeholder","maxlength","ionChange","keydown","ionBlur"],["color","primary","slot","end","class","skip-button","tabindex","0",3,"innerHtml","click",4,"ngIf"],["fill","clear","color","primary","slot","end","class","skip-button","tabindex","-1",3,"click",4,"ngIf"],["tabindex","-1","fill","clear","slot","start",1,"field-expander",3,"click"],["slot","icon-only",3,"name"],["color","primary","slot","end","tabindex","0",1,"skip-button",3,"innerHtml","click"],["fill","clear","color","primary","slot","end","tabindex","-1",1,"skip-button",3,"click"],["slot","icon-only","name","trash-outline"],["tabindex","0","rows","1","auto-grow","","type","text","debounce","100",2,"font-style","italic",3,"id","formControlName","placeholder","maxlength","ionChange","keydown","ionBlur"],["color","primary","slot","end","class","skip-button","tabindex","-1",3,"innerHtml",4,"ngIf"],["color","primary","slot","end","tabindex","-1",1,"skip-button",3,"innerHtml"],["type","text","inputmode","url","tabindex","0","debounce","100",2,"font-size","smaller",3,"id","formControlName","placeholder","maxlength","ionChange","keydown","ionBlur"],["fill","clear","slot","end","class","skip-button","tabindex","-1",3,"click",4,"ngIf"],["fill","clear","slot","end","tabindex","-1",1,"skip-button",3,"click"],["lines","none",1,"ion-no-padding",2,"padding-left","5px","padding-top","5px"],["size","small","fill","clear","color","primary",3,"click"],["name","add"],["tabindex","-1","fill","clear",1,"ion-no-padding","ion-no-margin",3,"innerHtml","click"],["lines","none","text-wrap","",1,"ion-text-end"],[2,"line-height","1.0"],["size","large","color","primary","slot","end","shape","round","tabindex","0",3,"disabled","click"],["name","checkmark"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t._UZ(4,"ion-title",2),t.ALo(5,"translate"),t.TgZ(6,"ion-buttons",3)(7,"ion-button",4),t.NdJ("click",function(){return n.del_poll_dialog()}),t._UZ(8,"ion-icon",5),t.qZA(),t.TgZ(9,"ion-button",4),t.NdJ("click",function(l){return n.showkebap(l)}),t._UZ(10,"ion-icon",6),t.qZA()()()(),t.YNc(11,ht,46,48,"ion-content",7)),2&e&&(t.xp6(4),t.Q6J("innerHtml",t.lcZ(5,2,"draftpoll.-page-title"),t.oJD),t.xp6(7),t.Q6J("ngIf",n.ready))},directives:[_.Gu,_.sr,_.Sm,_.fG,_.wd,_.YG,_.gu,h.O5,_.W2,r._Y,r.JL,r.sg,_.Ie,_.Q$,_.ho,_.w,_.t9,_.QI,r.JJ,r.u,_.n0,h.sg,_.pK,_.j9,r.Q7,r.nD,_.g2,_.x4,D.K,_.W4],pipes:[x.X$],styles:['@charset "UTF-8";']}),o})();const xt=[{path:"",component:J}];let vt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(xt)],f.Bz]}),o})();var wt=p(4496);let yt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.ez,r.u5,_.Pc,r.UX,vt,wt.m,x.aw.forChild()]]}),o})()}}]);
//# sourceMappingURL=9701.4c52363c13f73908.js.map