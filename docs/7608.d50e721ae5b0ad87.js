"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7608],{7608:(V,d,a)=>{a.r(d),a.d(d,{MypollsPageModule:()=>$});var _=a(6362),f=a(587),p=a(8139),e=a(3926),g=a(1951),n=a(260),u=a(6301);function x(o,t){1&o&&(n.ynx(0),n._UZ(1,"ion-icon",7)(2,"ion-icon",8),n.BQk())}function y(o,t){1&o&&n._UZ(0,"ion-icon",9)}function Z(o,t){if(1&o&&(n.TgZ(0,"small"),n._UZ(1,"br"),n._uU(2),n.qZA()),2&o){const i=n.oxw().$implicit;n.xp6(2),n.hij(" ",i.body," ")}}function h(o,t){if(1&o&&(n.TgZ(0,"ion-button",24),n._UZ(1,"ion-icon",25),n._uU(2,"\xa0"),n._UZ(3,"span",2),n.ALo(4,"translate"),n.qZA()),2&o){const i=n.oxw().$implicit;n.Q6J("routerLink","/poll/"+i.pid),n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,2,"go-to-poll"),n.oJD)}}function J(o,t){if(1&o){const i=n.EpF();n.TgZ(0,"ion-card")(1,"ion-card-content",19)(2,"ion-item",20),n._uU(3," \xa0\xa0 "),n.TgZ(4,"ion-label",19),n._uU(5),n.YNc(6,Z,3,1,"small",4),n.qZA(),n.YNc(7,h,5,4,"ion-button",21),n.TgZ(8,"ion-button",22),n.NdJ("click",function(){const r=n.CHM(i).$implicit,c=n.oxw(2);return c.news.delete(r),c.G.N.dismiss(r.key)}),n._UZ(9,"ion-icon",23),n.qZA()()()()}if(2&o){const i=t.$implicit;n.xp6(5),n.hij(" ",i.title," "),n.xp6(1),n.Q6J("ngIf",i.body),n.xp6(1),n.Q6J("ngIf",i.pid)}}function Q(o,t){1&o&&(n._UZ(0,"ion-badge",32),n.ALo(1,"translate")),2&o&&n.Q6J("innerHtml",n.lcZ(1,1,"badges.can-accept"),n.oJD)}function b(o,t){1&o&&(n._UZ(0,"ion-badge",33),n.ALo(1,"translate")),2&o&&n.Q6J("innerHtml",n.lcZ(1,1,"badges.please-check"),n.oJD)}const w=function(o){return{from:o}};function T(o,t){if(1&o&&(n.ynx(0),n.TgZ(1,"ion-item")(2,"ion-label",27),n._UZ(3,"ion-icon",28),n._uU(4,"\xa0 "),n._UZ(5,"span",2),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"ion-buttons",29),n.YNc(8,Q,2,3,"ion-badge",30),n.YNc(9,b,2,3,"ion-badge",31),n.qZA()(),n.BQk()),2&o){const i=t.$implicit;n.xp6(2),n.Q6J("routerLink",i.url),n.xp6(3),n.Q6J("innerHtml",n.xi3(6,4,"mypolls.request-by",n.VKq(7,w,i.from)),n.oJD),n.xp6(3),n.Q6J("ngIf","can-accept"==i.status),n.xp6(1),n.Q6J("ngIf","two-way"==i.status||"cycle"==i.status)}}function A(o,t){1&o&&(n.ynx(0),n.TgZ(1,"ion-item"),n._UZ(2,"p",2),n.ALo(3,"translate"),n.qZA(),n.BQk()),2&o&&(n.xp6(2),n.Q6J("innerHtml",n.lcZ(3,1,"mypolls.no-running-polls"),n.oJD))}function M(o,t){if(1&o&&(n.ynx(0),n.TgZ(1,"ion-item",26)(2,"ion-label"),n._UZ(3,"b",2),n.ALo(4,"translate"),n.qZA()(),n.YNc(5,T,10,9,"ng-container",11),n.YNc(6,A,4,3,"ng-container",4),n.BQk()),2&o){const i=n.oxw(2);n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,3,"mypolls.please-respond"),n.oJD),n.xp6(2),n.Q6J("ngForOf",i.unanswered_requests),n.xp6(1),n.Q6J("ngIf",0==i.Object.keys(i.G.P.running_polls).length&&!i.G.show_spinner)}}function P(o,t){1&o&&(n.TgZ(0,"div",39),n._UZ(1,"ion-badge",40),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("innerHtml",n.lcZ(2,1,"badges.new"),n.oJD))}function v(o,t){1&o&&(n.TgZ(0,"div",39),n._UZ(1,"ion-badge",41),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("innerHtml",n.lcZ(2,1,"badges.closing-soon"),n.oJD))}function L(o,t){1&o&&(n.TgZ(0,"div",39),n._UZ(1,"ion-badge",42),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("innerHtml",n.lcZ(2,1,"badges.abstaining"),n.oJD))}function U(o,t){1&o&&(n.TgZ(0,"div",39),n._UZ(1,"ion-badge",43),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("innerHtml",n.lcZ(2,1,"badges.delegated"),n.oJD))}function D(o,t){if(1&o&&(n.TgZ(0,"ion-button",44),n._UZ(1,"ion-icon",45),n.qZA()),2&o){const i=n.oxw().$implicit;n.Q6J("routerLink","/inviteto/"+i.pid)}}function G(o,t){if(1&o&&(n.ynx(0),n.TgZ(1,"ion-item")(2,"ion-label",27),n._UZ(3,"ion-icon",34),n._uU(4,"\xa0 "),n._UZ(5,"i",2),n.qZA(),n.TgZ(6,"ion-buttons",35)(7,"div",36),n.YNc(8,P,3,3,"div",37),n.YNc(9,v,3,3,"div",37),n.YNc(10,L,3,3,"div",37),n.YNc(11,U,3,3,"div",37),n.qZA(),n.YNc(12,D,2,1,"ion-button",38),n.qZA()(),n.BQk()),2&o){const i=t.$implicit,l=n.oxw(2);n.xp6(2),n.Q6J("routerLink","/poll/"+i.pid),n.xp6(1),n.Q6J("name","share"==i.type?"cut":"trophy"),n.xp6(2),n.Q6J("innerHtml",i.title,n.oJD),n.xp6(3),n.Q6J("ngIf",!i.have_seen),n.xp6(1),n.Q6J("ngIf",i.is_closing_soon),n.xp6(1),n.Q6J("ngIf",i.have_seen&&i.am_abstaining),n.xp6(1),n.Q6J("ngIf",i.have_delegated),n.xp6(1),n.Q6J("ngIf",l.can_invite(i))}}function H(o,t){1&o&&(n.ynx(0),n.TgZ(1,"ion-item")(2,"ion-col",46),n._UZ(3,"p",2),n.ALo(4,"translate"),n.TgZ(5,"small"),n._UZ(6,"p",2),n.ALo(7,"translate"),n.qZA()()(),n.BQk()),2&o&&(n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,2,"mypolls.no-running-polls-1"),n.oJD),n.xp6(3),n.Q6J("innerHtml",n.lcZ(7,4,"mypolls.no-running-polls-2"),n.oJD))}function k(o,t){1&o&&(n.TgZ(0,"div",39),n._UZ(1,"ion-badge",40),n.ALo(2,"translate"),n.qZA()),2&o&&(n.xp6(1),n.Q6J("innerHtml",n.lcZ(2,1,"badges.new"),n.oJD))}function I(o,t){if(1&o&&(n.ynx(0),n.TgZ(1,"ion-item",27)(2,"ion-label"),n._UZ(3,"ion-icon",34),n._uU(4,"\xa0 "),n._UZ(5,"i",2),n.qZA(),n.TgZ(6,"ion-buttons",35)(7,"div",36),n.YNc(8,k,3,3,"div",37),n.qZA()()(),n.BQk()),2&o){const i=t.$implicit;n.xp6(1),n.Q6J("routerLink","/poll/"+i.pid),n.xp6(2),n.Q6J("name","share"==i.type?"cut":"trophy"),n.xp6(2),n.Q6J("innerHtml",i.title,n.oJD),n.xp6(3),n.Q6J("ngIf",!i.have_seen_results)}}function N(o,t){1&o&&(n.ynx(0),n.TgZ(1,"ion-item")(2,"ion-col",46),n._UZ(3,"p",2),n.ALo(4,"translate"),n.TgZ(5,"small"),n._UZ(6,"p",2),n.ALo(7,"translate"),n.qZA()()(),n.BQk()),2&o&&(n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,2,"mypolls.no-recently-closed-polls-1"),n.oJD),n.xp6(3),n.Q6J("innerHtml",n.lcZ(7,4,"mypolls.no-recently-closed-polls-2"),n.oJD))}function q(o,t){if(1&o&&(n.ynx(0),n.YNc(1,I,9,4,"ng-container",11),n.YNc(2,N,8,6,"ng-container",4),n.BQk()),2&o){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.closed_polls),n.xp6(1),n.Q6J("ngIf",0==i.Object.keys(i.G.P.closed_polls).length&&!i.G.show_spinner)}}function Y(o,t){if(1&o&&(n.TgZ(0,"ion-item",27)(1,"ion-label"),n._UZ(2,"ion-icon",34),n._uU(3,"\xa0 "),n._UZ(4,"i",2),n.qZA(),n.TgZ(5,"ion-buttons",35),n._UZ(6,"ion-badge",48),n.ALo(7,"translate"),n.TgZ(8,"ion-button",49),n._UZ(9,"ion-icon",50),n.qZA()()()),2&o){const i=n.oxw().$implicit;n.Q6J("routerLink","/draftpoll/"+i.pid),n.xp6(2),n.Q6J("name","share"==i.type?"cut":"trophy"),n.xp6(2),n.Q6J("innerHtml",i.title,n.oJD),n.xp6(2),n.Q6J("innerHtml",n.lcZ(7,4,"badges.draft"),n.oJD)}}function z(o,t){if(1&o&&(n.ynx(0),n.YNc(1,Y,10,6,"ion-item",47),n.BQk()),2&o){const i=t.$implicit;n.xp6(1),n.Q6J("ngIf","draft"==i.state)}}function O(o,t){1&o&&(n.ynx(0),n.TgZ(1,"ion-item")(2,"ion-col",46),n._UZ(3,"p",2),n.ALo(4,"translate"),n.TgZ(5,"small"),n._UZ(6,"p",2),n.ALo(7,"translate"),n.qZA()()(),n.BQk()),2&o&&(n.xp6(3),n.Q6J("innerHtml",n.lcZ(4,2,"mypolls.no-draft-polls-1"),n.oJD),n.xp6(3),n.Q6J("innerHtml",n.lcZ(7,4,"mypolls.no-draft-polls-2"),n.oJD))}function B(o,t){if(1&o&&(n.ynx(0),n.YNc(1,z,2,1,"ng-container",11),n.YNc(2,O,8,6,"ng-container",4),n.BQk()),2&o){const i=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",i.Object.values(i.G.P.polls)),n.xp6(1),n.Q6J("ngIf",0==i.Object.keys(i.G.P.draft_polls).length&&!i.G.show_spinner)}}function C(o,t){if(1&o){const i=n.EpF();n.TgZ(0,"ion-content")(1,"ion-list",10),n.YNc(2,J,10,3,"ion-card",11),n.YNc(3,M,7,5,"ng-container",4),n.TgZ(4,"ion-item",12)(5,"ion-label"),n._UZ(6,"b",2),n.ALo(7,"translate"),n.qZA()(),n.YNc(8,G,13,8,"ng-container",11),n.YNc(9,H,8,6,"ng-container",4),n.TgZ(10,"ion-item",13),n.NdJ("click",function(){n.CHM(i);const s=n.oxw();return s.closed_expanded=!s.closed_expanded}),n._UZ(11,"ion-icon",14),n._uU(12," \xa0\xa0"),n._UZ(13,"ion-label",2),n.ALo(14,"translate"),n.qZA(),n.YNc(15,q,3,2,"ng-container",4),n.TgZ(16,"ion-item",15),n.NdJ("click",function(){n.CHM(i);const s=n.oxw();return s.drafts_expanded=!s.drafts_expanded}),n._UZ(17,"ion-icon",14),n._uU(18," \xa0\xa0"),n._UZ(19,"ion-label",2),n.ALo(20,"translate"),n.qZA(),n.YNc(21,B,3,2,"ng-container",4),n.qZA(),n.TgZ(22,"ion-fab",16)(23,"ion-fab-button",17),n._UZ(24,"ion-icon",18),n.qZA()()()}if(2&o){const i=n.oxw();n.xp6(2),n.Q6J("ngForOf",i.news),n.xp6(1),n.Q6J("ngIf",i.unanswered_requests.length>0),n.xp6(3),n.Q6J("innerHtml",n.lcZ(7,11,"mypolls.running"),n.oJD),n.xp6(2),n.Q6J("ngForOf",i.running_polls),n.xp6(1),n.Q6J("ngIf",0==i.Object.keys(i.G.P.running_polls).length&&!i.G.show_spinner),n.xp6(2),n.Q6J("name",i.closed_expanded?"caret-down-outline":"caret-forward-outline"),n.xp6(2),n.Q6J("innerHtml",n.lcZ(14,13,"mypolls.recently-closed"),n.oJD),n.xp6(2),n.Q6J("ngIf",i.closed_expanded),n.xp6(2),n.Q6J("name",i.drafts_expanded?"caret-down-outline":"caret-forward-outline"),n.xp6(2),n.Q6J("innerHtml",n.lcZ(20,15,"mypolls.drafts"),n.oJD),n.xp6(2),n.Q6J("ngIf",i.drafts_expanded)}}const F=[{path:"",component:(()=>{class o{constructor(i,l){this.G=i,this.translate=l,this.Object=Object,this.window=window,this.news=new Set,this.unanswered_requests=[],this.closed_expanded=!1,this.drafts_expanded=!1,this.older_expanded=!1,this.G.L.entry("MypollsPage.constructor")}ngOnInit(){this.G.L.entry("MypollsPage.ngOnInit"),this.ready=!1}ionViewWillEnter(){this.G.L.entry("MypollsPage.ionViewWillEnter"),this.G.D.page=this,this.ready&&this.onDataChange()}ionViewDidEnter(){this.G.L.entry("MypollsPage.ionViewDidEnter",this.G.D.ready,this.ready),this.G.D.ready&&!this.ready&&this.onDataReady()}onDataReady(){this.G.L.entry("MypollsPage.onDataReady"),this.onDataChange(),this.ready=!0}onDataChange(){this.G.L.entry("MypollsPage.onDataChange"),this.news=new Set([...this.G.N.filter({class:"new_option"}),...this.G.N.filter({class:"delegation_accepted"}),...this.G.N.filter({class:"delegation_declined"}),...this.G.N.filter({class:"poll_closed"})]),this.unanswered_requests=[];for(const i in this.G.P.polls){const l=this.G.D.incoming_dids_caches[i];if(l)for(let[s,[r,c,m]]of l)["possible","two-way","cycle"].includes(m)&&(this.G.L.trace("MypollsPage.onDataChange found unanswered request",s,r,c,m),this.unanswered_requests.push({pid:i,did:s,from:r,url:c,status:m}))}}ionViewWillLeave(){this.G.L.entry("MypollsPage.ionViewWillLeave"),this.G.L.exit("MypollsPage.ionViewWillLeave")}ionViewDidLeave(){this.G.L.entry("MypollsPage.ionViewDidLeave"),this.G.D.save_state(),this.G.L.exit("MypollsPage.ionViewDidLeave")}can_invite(i){return i.creator==this.G.S.email}get running_polls(){return Object.values(this.G.P.polls).filter(i=>"running"==i.state).sort((i,l)=>i.remaining_time_fraction-l.remaining_time_fraction)}get closed_polls(){return Object.values(this.G.P.polls).filter(i=>"closed"==i.state).sort((i,l)=>l.due.getTime()-i.due.getTime())}}return o.\u0275fac=function(i){return new(i||o)(n.Y36(u.U),n.Y36(p.sK))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-mypolls"]],decls:12,vars:6,consts:[[2,"padding-right","11px"],["slot","start"],[3,"innerHtml"],["slot","end"],[4,"ngIf"],["name","swap-vertical-outline","color","grey","style","margin-right: 10px;",4,"ngIf"],["src","./assets/topright_icon.png"],["name","cloud-offline-outline","color","grey",2,"position","relative","bottom","-1px"],["name","alert-outline","color","grey"],["name","swap-vertical-outline","color","grey",2,"margin-right","10px"],["lines","full",1,"ion-no-margin","ion-no-padding"],[4,"ngFor","ngForOf"],["color","primary",1,"ion-no-margin"],["color","primary",2,"cursor","pointer",3,"click"],["size","small",3,"name"],["color","light",2,"cursor","pointer",3,"click"],["vertical","bottom","horizontal","end","slot","fixed",1,"ion-margin"],["routerLink","/draftpoll"],["name","add"],[1,"ion-no-margin","ion-no-padding"],["lines","none","color","warning",1,"ion-no-margin","ion-no-padding","item-text-wrap"],["class","ion-no-margin","fill","clear","size","small","style","color:var(--ion-color-warning-contrast)!important",3,"routerLink",4,"ngIf"],["slot","end","fill","clear","size","small",1,"ion-no-margin","ion-no-padding",3,"click"],["slot","icon-only","name","close-outline",2,"color","gray!important"],["fill","clear","size","small",1,"ion-no-margin",2,"color","var(--ion-color-warning-contrast)!important",3,"routerLink"],["name","arrow-forward-outline","size","small"],["color","primary"],[2,"cursor","pointer",3,"routerLink"],["size","small","name","mail-open-outline",1,"poll-type-list"],["slot","end",1,"ion-no-padding","ion-no-margin"],["class","ion-no-margin","style","margin-left:5px; font-size: x-small;","color","primary",3,"innerHtml",4,"ngIf"],["class","ion-no-margin","style","margin-left:5px; font-size: x-small;","color","secondary",3,"innerHtml",4,"ngIf"],["color","primary",1,"ion-no-margin",2,"margin-left","5px","font-size","x-small",3,"innerHtml"],["color","secondary",1,"ion-no-margin",2,"margin-left","5px","font-size","x-small",3,"innerHtml"],["size","small",1,"poll-type-list",3,"name"],["slot","end",1,"ion-no-padding","ion-no-margin",2,"position","relative","right","-10px"],[2,"display","flex","flex-direction","column"],["style","display: flex;flex-direction: row-reverse;",4,"ngIf"],["fill","clear","class","ion-no-padding ion-no-margin",3,"routerLink",4,"ngIf"],[2,"display","flex","flex-direction","row-reverse"],["color","warning",1,"ion-no-margin",2,"margin-left","5px","margin-bottom","1px","margin-top","1px","font-size","x-small",3,"innerHtml"],["size","small","color","danger",1,"ion-no-margin",2,"margin-left","5px","margin-bottom","1px","margin-top","1px","font-size","x-small",3,"innerHtml"],["color","danger","slot","end",1,"ion-no-margin",2,"margin-left","5px","margin-bottom","1px","margin-top","1px","font-size","x-small",3,"innerHtml"],["color","secondary","slot","end",1,"ion-no-margin",2,"margin-left","5px","margin-bottom","1px","margin-top","1px","font-size","x-small",3,"innerHtml"],["fill","clear",1,"ion-no-padding","ion-no-margin",3,"routerLink"],["name","share-social-outline","slot","icon-only","color","primary"],[1,"ion-no-padding","ion-no-margin"],["style","cursor: pointer;",3,"routerLink",4,"ngIf"],["color","light",1,"ion-no-margin",2,"margin-left","5px","font-size","x-small",3,"innerHtml"],["fill","clear"],["name","pencil-outline","slot","icon-only"]],template:function(i,l){1&i&&(n.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n._UZ(3,"ion-menu-button"),n.qZA(),n._UZ(4,"ion-title",2),n.ALo(5,"translate"),n.TgZ(6,"ion-buttons",3),n.YNc(7,x,3,0,"ng-container",4),n.YNc(8,y,1,0,"ion-icon",5),n.TgZ(9,"ion-thumbnail"),n._UZ(10,"ion-img",6),n.qZA()()()(),n.YNc(11,C,25,17,"ion-content",4)),2&i&&(n.xp6(4),n.Q6J("innerHtml",n.lcZ(5,4,"mypolls.-page-title"),n.oJD),n.xp6(3),n.Q6J("ngIf",!l.window.navigator.onLine),n.xp6(1),n.Q6J("ngIf",l.G.show_spinner||!l.window.navigator.onLine),n.xp6(3),n.Q6J("ngIf",l.ready))},directives:[e.Gu,e.sr,e.Sm,e.fG,e.wd,_.O5,e.gu,e.Bs,e.Xz,e.W2,e.q_,_.sg,e.PM,e.FN,e.Ie,e.Q$,e.YG,e.YI,g.rH,e.yp,e.wI,e.IJ,e.W4],pipes:[p.X$],styles:['@charset "UTF-8";']}),o})()}];let j=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[g.Bz.forChild(F)],g.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[_.ez,f.u5,e.Pc,j,p.aw.forChild()]]}),o})()}}]);
//# sourceMappingURL=7608.d50e721ae5b0ad87.js.map